<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vendor Registration</title>
    
    <!-- React & ReactDOM -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js" crossorigin></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js" crossorigin></script>
    
    <!-- Babel for JSX -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Custom Styles for Animations -->
    <style>
        @keyframes gradient-xy {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }
        .animate-gradient-xy {
            background-size: 200% 200%;
            animation: gradient-xy 15s ease infinite;
        }
        /* Utility animations to match tailwindcss-animate */
        .animate-in { animation-duration: 300ms; animation-fill-mode: forwards; opacity: 0; }
        .fade-in { animation-name: fadeIn; }
        .zoom-in { animation-name: zoomIn; }
        .slide-in-from-top-1 { animation-name: slideInTop; }
        .slide-in-from-top-2 { animation-name: slideInTop; }
        
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        @keyframes zoomIn { from { transform: scale(0.95); opacity: 0; } to { transform: scale(1); opacity: 1; } }
        @keyframes slideInTop { from { transform: translateY(-10px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }
    </style>
</head>
<body class="bg-slate-50">

<!-- SVG Icon -->
<div class="fixed top-6 left-6 opacity-80 hover:opacity-100 transition-opacity duration-300">
    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="0 0 512 512" fill="none" stroke="currentColor" strokeWidth="20" strokeLinecap="round" strokeLinejoin="round" class="text-indigo-600">
        <!-- Globe -->
        <circle cx="256" cy="140" r="100"/>
        <path d="M256 40v200M156 140h200"/>
        <path d="M206 90q70 50 100 100M306 190q-30 50-100 100"/>
        
        <!-- People -->
        <circle cx="120" cy="280" r="45"/>
        <circle cx="256" cy="280" r="50"/>
        <circle cx="392" cy="280" r="45"/>
        
        <!-- Bodies -->
        <path d="M75 330v60c0 15 30 25 45 25h0c15 0 45-10 45-25v-60"/>
        <path d="M211 335v55c0 15 35 25 50 25h0c15 0 50-10 50-25v-55"/>
        <path d="M347 330v60c0 15 30 25 45 25h0c15 0 45-10 45-25v-60"/>
    </svg>
</div>

<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect } = React;

    // --- CONFIGURATION ---
    const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyZiHS5rXhsJo0WvEIVLxjQL4AV5G1UAEo6VJu-UiXAYPjtUxEFc4RXhcRTPZgjE6i6lQ/exec";

    // --- Icon Components ---
    const IconWrapper = ({ children, className }) => (
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>{children}</svg>
    );
    const Send = (p) => <IconWrapper {...p}><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></IconWrapper>;
    const CheckCircle = (p) => <IconWrapper {...p}><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path><polyline points="22 4 12 14.01 9 11.01"></polyline></IconWrapper>;
    const AlertCircle = (p) => <IconWrapper {...p}><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="8" x2="12" y2="12"></line><line x1="12" y1="16" x2="12.01" y2="16"></line></IconWrapper>;
    const Building2 = (p) => <IconWrapper {...p}><path d="M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z"></path><path d="M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2"></path><path d="M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2"></path><path d="M10 6h4"></path><path d="M10 10h4"></path><path d="M10 14h4"></path><path d="M10 18h4"></path></IconWrapper>;
    const MapPin = (p) => <IconWrapper {...p}><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0Z"></path><circle cx="12" cy="10" r="3"></circle></IconWrapper>;
    const Globe = (p) => <IconWrapper {...p}><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></IconWrapper>;
    const Mail = (p) => <IconWrapper {...p}><rect width="20" height="16" x="2" y="4" rx="2"></rect><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"></path></IconWrapper>;
    const User = (p) => <IconWrapper {...p}><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></IconWrapper>;
    const Sparkles = (p) => <IconWrapper {...p}><path d="m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L12 3Z"></path><path d="M5 3v4"></path><path d="M9 3v4"></path><path d="M3 5h4"></path><path d="M3 9h4"></path></IconWrapper>;
    const Briefcase = (p) => <IconWrapper {...p}><rect width="20" height="14" x="2" y="7" rx="2" ry="2"></rect><path d="M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"></path></IconWrapper>;
    const Check = (p) => <IconWrapper {...p}><polyline points="20 6 9 17 4 12"></polyline></IconWrapper>;

    // --- Helper Component (Moved OUTSIDE to fix focus issue) ---
    const InputField = ({ 
        label, 
        icon: Icon, 
        name, 
        type = "text", 
        placeholder, 
        required = true,
        value,
        onChange,
        isFocused,
        onFocus,
        onBlur,
        error
    }) => {
        const hasValue = value.length > 0;
        const isValid = hasValue && !error;

        return (
          <div className="relative group transition-all duration-300">
            <label className={`block text-xs font-bold uppercase tracking-wider mb-1 transition-colors duration-300 ${isFocused ? 'text-indigo-600' : 'text-slate-500'}`}>
              {label}
            </label>
            <div className={`
              relative flex items-center bg-white/50 backdrop-blur-sm border-2 rounded-xl overflow-hidden transition-all duration-300
              ${isFocused ? 'border-indigo-500 shadow-lg shadow-indigo-500/20 scale-[1.02]' : 'border-slate-200 hover:border-indigo-300'}
              ${error ? '!border-red-400 !bg-red-50/50' : ''}
            `}>
              <div className={`pl-4 pr-3 ${isFocused ? 'text-indigo-600' : 'text-slate-400'}`}>
                <Icon className="w-5 h-5" />
              </div>
              <input
                required={required}
                type={type}
                name={name}
                value={value}
                onChange={onChange}
                onFocus={onFocus}
                onBlur={onBlur}
                className="w-full py-3 bg-transparent outline-none text-slate-700 placeholder:text-slate-400 font-medium"
                placeholder={placeholder}
              />
              {isValid && (
                <div className="pr-4 animate-in fade-in zoom-in duration-300">
                  <Check className="w-5 h-5 text-green-500" />
                </div>
              )}
            </div>
            {error && (
              <p className="mt-1 text-xs text-red-600 flex items-center gap-1 animate-in slide-in-from-top-1">
                <AlertCircle className="w-3 h-3" /> {error}
              </p>
            )}
          </div>
        );
    };

    function VendorFormApp() {
      const [formData, setFormData] = useState({
        name: '',
        email: '',
        company: '',
        city: '',
        country: '',
        isRemote: false
      });
    
      const [status, setStatus] = useState('idle'); 
      const [errorMessage, setErrorMessage] = useState('');
      const [emailError, setEmailError] = useState('');
      const [focusedField, setFocusedField] = useState('');
    
      const publicDomains = [
        'gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com', 
        'aol.com', 'icloud.com', 'protonmail.com', 'zoho.com', 'yandex.com'
      ];
    
      const calculateProgress = () => {
        let filled = 0;
        const total = 5; 
        if (formData.name.length > 2) filled++;
        if (formData.company.length > 1) filled++;
        if (formData.email.length > 5 && !emailError) filled++;
        if (formData.city.length > 1) filled++;
        if (formData.country.length > 1) filled++;
        return (filled / total) * 100;
      };
    
      const progress = calculateProgress();
    
      const handleInputChange = (e) => {
        const { name, value, type, checked } = e.target;
        
        if (name === 'email') {
          validateEmail(value);
        }
    
        setFormData(prev => ({
          ...prev,
          [name]: type === 'checkbox' ? checked : value
        }));
      };
    
      const validateEmail = (email) => {
        if (!email) {
          setEmailError('');
          return;
        }
        
        const domain = email.split('@')[1];
        if (domain && publicDomains.includes(domain.toLowerCase())) {
          setEmailError('Please use an official work email.');
        } else {
          setEmailError('');
        }
      };
    
      const handleSubmit = async (e) => {
        e.preventDefault();
        if (emailError) return;
        
        if (!SCRIPT_URL || SCRIPT_URL.includes("PASTE_YOUR")) {
          setErrorMessage('System Error: Database not connected.');
          setStatus('error');
          return;
        }
    
        setStatus('submitting');
        setErrorMessage('');
    
        const payload = new FormData();
        payload.append('name', formData.name);
        payload.append('email', formData.email);
        payload.append('company', formData.company);
        payload.append('location', formData.isRemote 
          ? `Remote (${formData.city}, ${formData.country})` 
          : `${formData.city}, ${formData.country}`);
        payload.append('timestamp', new Date().toISOString());
    
        try {
          await fetch(SCRIPT_URL, {
            method: 'POST',
            body: payload,
            mode: 'no-cors' 
          });
    
          setStatus('success');
          setFormData({
            name: '',
            email: '',
            company: '',
            city: '',
            country: '',
            isRemote: false
          });
          
          setTimeout(() => setStatus('idle'), 5000);
    
        } catch (error) {
          setStatus('error');
          setErrorMessage('Failed to submit. Please check connection.');
        }
      };
    
      return (
        <div className="min-h-screen flex items-center justify-center p-4 font-sans relative overflow-hidden">
          
          <div className="absolute inset-0 bg-gradient-to-br from-indigo-500 via-purple-500 to-pink-500 animate-gradient-xy"></div>
          <div className="absolute inset-0 opacity-20 bg-[url('https://www.transparenttextures.com/patterns/cubes.png')]"></div>
          <div className="absolute top-10 left-10 w-32 h-32 bg-white/20 rounded-full blur-2xl animate-pulse"></div>
          <div className="absolute bottom-10 right-10 w-48 h-48 bg-yellow-300/20 rounded-full blur-3xl animate-pulse delay-1000"></div>
    
          <div className="max-w-xl w-full bg-white/90 backdrop-blur-xl rounded-3xl shadow-2xl overflow-hidden border border-white/50 relative z-10 transition-all duration-500">
            
            {status !== 'success' && (
              <div className="h-1.5 w-full bg-slate-100">
                <div 
                  className="h-full bg-gradient-to-r from-indigo-500 to-pink-500 transition-all duration-700 ease-out"
                  style={{ width: `${progress}%` }}
                ></div>
              </div>
            )}
    
            <div className="p-8 pb-4 flex justify-between items-start">
              <div>
                <div className="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-indigo-50 text-indigo-600 text-xs font-bold uppercase tracking-wider mb-3">
                  <Sparkles className="w-3 h-3" /> Official Partner
                </div>
                <h1 className="text-3xl font-black text-slate-800 tracking-tight flex items-center gap-2">
                  Vendor Portal
                </h1>
                <p className="text-slate-500 mt-2 text-sm leading-relaxed max-w-sm">
                  Join our network to get the requirement on Priority. Complete your profile below to get started.
                </p>
              </div>
            </div>
    
            <div className="px-8 pb-8">
              {status === 'success' ? (
                <div className="text-center py-12 animate-in fade-in zoom-in duration-500">
                  <div className="relative mx-auto w-24 h-24 mb-6">
                    <div className="absolute inset-0 bg-green-400 rounded-full blur-xl opacity-20 animate-pulse"></div>
                    <div className="relative bg-gradient-to-tr from-green-400 to-emerald-600 rounded-full w-full h-full flex items-center justify-center shadow-lg shadow-green-500/30">
                      <CheckCircle className="w-12 h-12 text-white" />
                    </div>
                  </div>
                  <h3 className="text-2xl font-bold text-slate-800">You're on the list!</h3>
                  <p className="text-slate-500 mt-2 mb-8">
                    Thank you, <span className="font-semibold text-slate-800">{formData.name}</span>.<br/>
                    We have received your details for <span className="font-semibold text-slate-800">{formData.company}</span>.
                  </p>
                  <button 
                    onClick={() => setStatus('idle')}
                    className="inline-flex items-center gap-2 px-6 py-3 rounded-xl bg-slate-100 text-slate-600 font-semibold hover:bg-slate-200 hover:text-slate-800 transition-all"
                  >
                    Register another
                  </button>
                </div>
              ) : (
                <form onSubmit={handleSubmit} className="space-y-6">
                  
                  <div className="space-y-4">
                    <InputField 
                      label="Who are you?" 
                      name="name" 
                      icon={User} 
                      placeholder="e.g. Jane Smith"
                      value={formData.name}
                      onChange={handleInputChange}
                      isFocused={focusedField === 'name'}
                      onFocus={() => setFocusedField('name')}
                      onBlur={() => setFocusedField('')}
                    />
                    
                    <InputField 
                      label="Work Email" 
                      name="email" 
                      icon={Mail} 
                      type="email" 
                      placeholder="name@company.com"
                      value={formData.email}
                      onChange={handleInputChange}
                      isFocused={focusedField === 'email'}
                      onFocus={() => setFocusedField('email')}
                      onBlur={() => setFocusedField('')}
                      error={emailError}
                    />
    
                    <InputField 
                      label="Company Name" 
                      name="company" 
                      icon={Briefcase} 
                      placeholder="e.g. Acme Industries"
                      value={formData.company}
                      onChange={handleInputChange}
                      isFocused={focusedField === 'company'}
                      onFocus={() => setFocusedField('company')}
                      onBlur={() => setFocusedField('')}
                    />
                  </div>
    
                  <div className="p-5 bg-slate-50/80 rounded-2xl border border-slate-100 space-y-4">
                    <div className="flex items-center gap-2 mb-2">
                      <Globe className="w-4 h-4 text-indigo-500" />
                      <span className="text-xs font-bold uppercase tracking-wider text-slate-500">Location Details</span>
                    </div>
                    
                    <div className="grid grid-cols-2 gap-4">
                      <InputField 
                        label="City" 
                        name="city" 
                        icon={MapPin} 
                        placeholder="City"
                        value={formData.city}
                        onChange={handleInputChange}
                        isFocused={focusedField === 'city'}
                        onFocus={() => setFocusedField('city')}
                        onBlur={() => setFocusedField('')}
                      />
                      <InputField 
                        label="Country" 
                        name="country" 
                        icon={Globe} 
                        placeholder="Country"
                        value={formData.country}
                        onChange={handleInputChange}
                        isFocused={focusedField === 'country'}
                        onFocus={() => setFocusedField('country')}
                        onBlur={() => setFocusedField('')}
                      />
                    </div>
    
                    <div 
                      className={`
                        flex items-center gap-3 p-3 rounded-xl cursor-pointer transition-all duration-300 border
                        ${formData.isRemote 
                          ? 'bg-indigo-50 border-indigo-200 shadow-sm' 
                          : 'bg-white border-transparent hover:bg-slate-100'}
                      `}
                      onClick={() => setFormData(prev => ({...prev, isRemote: !prev.isRemote}))}
                    >
                      <div className={`
                        w-5 h-5 rounded border flex items-center justify-center transition-colors
                        ${formData.isRemote ? 'bg-indigo-600 border-indigo-600' : 'border-slate-300 bg-white'}
                      `}>
                        {formData.isRemote && <Check className="w-3 h-3 text-white" />}
                      </div>
                      <span className={`text-sm font-medium select-none ${formData.isRemote ? 'text-indigo-700' : 'text-slate-600'}`}>
                        This is a remote position
                      </span>
                    </div>
                  </div>
    
                  {status === 'error' && (
                    <div className="p-4 bg-red-50 text-red-700 text-sm rounded-xl flex items-center gap-3 animate-pulse">
                      <AlertCircle className="w-5 h-5 flex-shrink-0" />
                      {errorMessage}
                    </div>
                  )}
    
                  <button
                    type="submit"
                    disabled={status === 'submitting' || !!emailError}
                    className={`
                      w-full py-4 px-6 rounded-xl font-bold text-lg flex items-center justify-center gap-3 transition-all duration-300 transform
                      ${status === 'submitting' || !!emailError
                        ? 'bg-slate-200 text-slate-400 cursor-not-allowed'
                        : 'bg-gradient-to-r from-indigo-600 to-purple-600 text-white shadow-lg shadow-indigo-500/30 hover:shadow-indigo-500/50 hover:scale-[1.02] active:scale-[0.98]'
                      }
                    `}
                  >
                    {status === 'submitting' ? (
                      <>
                        <div className="w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin" />
                        Processing...
                      </>
                    ) : (
                      <>
                        Submit Registration <Send className="w-5 h-5" />
                      </>
                    )}
                  </button>
                </form>
              )}
            </div>
            
            <div className="bg-slate-50/50 backdrop-blur p-4 text-center border-t border-slate-100">
               <p className="text-xs text-slate-400 font-medium">
                 Securely connected
               </p>
            </div>
          </div>
        </div>
      );
    }
    
    // Render the app
    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<VendorFormApp />);
</script>

</body>
</html>
